<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laoâ€“China Railway | LCR System</title>

<style>
:root{
  --lcr:#c4161c;
  --bg:#f2f4f8;
  --card:#fff;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
}

/* ===== CARD ===== */
.card{
  max-width:480px;
  margin:28px auto;
  background:var(--card);
  padding:28px;
  border-radius:20px;
  box-shadow:0 18px 40px rgba(0,0,0,.12);
}

/* ===== HEADER ===== */
.header{
  text-align:center;
  margin-bottom:22px;
}
.header img{height:72px}
.header h1{
  color:var(--lcr);
  margin:10px 0 0;
  font-size:22px;
  font-weight:800;
}

/* ===== FORM ===== */
label{
  display:block;
  font-weight:600;
  margin-top:14px;
  font-size:14px;
}

input,select{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:16px;
}

input[readonly]{
  background:#f3f4f6;
  font-weight:700;
}

/* ===== GRID (FIXED SIZE) ===== */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

/* ===== BUTTON ===== */
button{
  width:100%;
  margin-top:24px;
  padding:16px;
  font-size:18px;
  font-weight:800;
  background:var(--lcr);
  color:#fff;
  border:none;
  border-radius:16px;
  cursor:pointer;
}
button:active{transform:scale(.98)}

.hidden{display:none}
.footer{
  text-align:center;
  font-size:12px;
  margin-top:16px;
  color:#777;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <div class="header">
    <img src="https://th.bing.com/th/id/R.644c5e4755e06e580d08028ac71fd66f?rik=s5y%2b2sm0G3gxrA&riu=http%3a%2f%2fwww.chrisfritze.com%2fuploads%2f9%2f4%2f8%2f1%2f94817372%2flcr-logo_orig.jpg&ehk=oSunJQyAVlLmLmsDF2DCEBlJUkeJxg8qGCiCp6PKiPs%3d&risl=&pid=ImgRaw&r=0">
    <h1>LCR Login</h1>
  </div>

  <label>Username</label>
  <input id="user">

  <label>Password</label>
  <input id="pass" type="password">

  <button onclick="login()">Login</button>
  <p id="loginMsg" style="color:red;text-align:center"></p>
</div>

<!-- APP -->
<div class="card hidden" id="app">
  <div class="header">
    <img src="https://th.bing.com/th/id/R.644c5e4755e06e580d08028ac71fd66f?rik=s5y%2b2sm0G3gxrA&riu=http%3a%2f%2fwww.chrisfritze.com%2fuploads%2f9%2f4%2f8%2f1%2f94817372%2flcr-logo_orig.jpg&ehk=oSunJQyAVlLmLmsDF2DCEBlJUkeJxg8qGCiCp6PKiPs%3d&risl=&pid=ImgRaw&r=0">
    <h1>Laoâ€“China Railway</h1>
  </div>

  <label>ID</label>
  <select id="id"><option>D87</option><option>D88</option></select>

  <label>Passenger</label>
  <select id="passenger" onchange="updatePrice()">
    <option value="å…¨">å…¨ (Adult)</option>
    <option value="å­©">å­© (Child)</option>
  </select>

  <div class="grid">
  <div>
    <label>From</label>
    <select id="from" onchange="updatePrice()">
      <option value="">Select</option>
      <option value="VTE">VTE</option>
      <option value="VV">VV</option>
      <option value="LPB">LPB</option>
      <option value="MX">MX</option>
      <option value="BT">BT</option>
    </select>
  </div>

  <div>
    <label>To</label>
    <select id="to" onchange="updatePrice()">
      <option value="">Select</option>
      <option value="VTE">VTE</option>
      <option value="VV">VV</option>
      <option value="LPB">LPB</option>
      <option value="MX">MX</option>
      <option value="BT">BT</option>
    </select>
  </div>
</div>

  <label>Quantity</label>
  <input type="number" id="quantity" value="1" min="1" oninput="updatePrice()">

  <label>Price</label>
  <input id="price" readonly>

  <label>Total</label>
  <input id="total" readonly>

  <button onclick="saveData()">Save</button>
</div>
 <div class="footer">
    Â© LCR-system åˆ˜è‰³è™¹ â€¢ version 0.008
 </div>
  </div>
  <hr style="margin:30px 0">

<h3 style="text-align:center;color:#c4161c">
ðŸ“Š Daily Sales Report
</h3>

<button onclick="loadReport()">Load Today Report</button>

<table id="reportTable" style="width:100%;margin-top:20px;border-collapse:collapse">
  <thead>
    <tr style="background:#eee">
      <th>Route</th>
      <th>Passenger</th>
      <th>Tickets</th>
      <th>Total (LAK)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbytgIim2Gx8dfNe4D-IML58nHJ2JIoinxejqhRqwhZN34M3UllEeQir-anx-1XFAQbvuA/exec";
async function loadReport(){
  const res = await fetch(WEB_APP_URL + "?action=report");
  const data = await res.json();

  const tbody = document.querySelector("#reportTable tbody");
  tbody.innerHTML = "";

  let maxRoute = "";
  let maxTickets = 0;

  data.forEach(r => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${r.route}</td>
      <td>${r.passenger === "å…¨" ? "Adult" : "Child"}</td>
      <td>${r.tickets}</td>
      <td>${r.revenue.toLocaleString()}</td>
    `;
    tbody.appendChild(tr);

    if (r.tickets > maxTickets) {
      maxTickets = r.tickets;
      maxRoute = r.route;
    }
  });

  if (maxRoute) {
    alert("ðŸ”¥ Most Sold Route Today: " + maxRoute);
  }
}

/* ================= LOGIN ================= */
function login(){
  if(user.value==="Admin" && pass.value==="1234"){
    loginBox.classList.add("hidden");
    app.classList.remove("hidden");
  } else {
    loginMsg.innerText="Invalid login";
  }
}

/* ================= PRICE TABLE ================= */
const priceTable = [
  {from:"VTE",to:"VV",type:"å…¨",price:210000},
  {from:"VTE",to:"LPB",type:"å…¨",price:399000},
  {from:"VTE",to:"MX",type:"å…¨",price:561000},
  {from:"VTE",to:"BT",type:"å…¨",price:669000},

  {from:"VTE",to:"VV",type:"å­©",price:111000},
  {from:"VTE",to:"LPB",type:"å­©",price:207000},
  {from:"VTE",to:"MX",type:"å­©",price:288000},
  {from:"VTE",to:"BT",type:"å­©",price:342000},

  {from:"VV",to:"VTE",type:"å…¨",price:210000},
  {from:"LPB",to:"VTE",type:"å…¨",price:399000},
  {from:"MX",to:"VTE",type:"å…¨",price:561000},
  {from:"BT",to:"VTE",type:"å…¨",price:669000},

  {from:"VV",to:"VTE",type:"å­©",price:111000},
  {from:"LPB",to:"VTE",type:"å­©",price:207000},
  {from:"MX",to:"VTE",type:"å­©",price:288000},
  {from:"BT",to:"VTE",type:"å­©",price:342000},

  {from:"VV",to:"LPB",type:"å…¨",price:201000},
  {from:"VV",to:"MX",type:"å…¨",price:363000},
  {from:"VV",to:"BT",type:"å…¨",price:471000},
  

  {from:"VV",to:"LPB",type:"å­©",price:108000},
  {from:"VV",to:"MX",type:"å­©",price:186000},
  {from:"VV",to:"BT",type:"å­©",price:243000},
  
  {from:"LPB",to:"VV",type:"å…¨",price:201000},
  {from:"MX",to:"VV",type:"å…¨",price:363000},
  {from:"BT",to:"VV",type:"å…¨",price:471000},
  

  {from:"LPB",to:"VV",type:"å­©",price:108000},
  {from:"MX",to:"VV",type:"å­©",price:186000},
  {from:"BT",to:"VV",type:"å­©",price:243000},

  {from:"LPB",to:"MX",type:"å…¨",price:174000},
  {from:"LPB",to:"BT",type:"å…¨",price:282000},
  
  {from:"LPB",to:"MX",type:"å­©",price:93000},
  {from:"LPB",to:"BT",type:"å­©",price:147000},
  
  {from:"MX",to:"LPB",type:"å…¨",price:174000},
  {from:"BT",to:"LPB",type:"å…¨",price:282000},
  
  {from:"MX",to:"LPB",type:"å­©",price:93000},
  {from:"BT",to:"LPB",type:"å­©",price:147000},

  {from:"MX",to:"BT",type:"å…¨",price:120000},

  {from:"MX",to:"BT",type:"å­©",price:66000},

  {from:"BT",to:"MX",type:"å…¨",price:120000},

  {from:"BT",to:"MX",type:"å­©",price:66000}

];

 function updatePrice(){
  const f=from.value;
  const t=to.value;
  const p=passenger.value;
  const q=Number(quantity.value);

  const r=priceTable.find(x=>x.from===f&&x.to===t&&x.type===p);
  if(!r){price.value="";total.value="";return;}

  price.value=r.price.toLocaleString();
  total.value=(r.price*q).toLocaleString();
}
 
async function saveData(){
  const payload = {
    id: id.value,
    passenger: passenger.value,
    from: from.value,
    to: to.value,
    quantity: Number(quantity.value),
    price: Number(price.value.replace(/,/g,"")),
    total: Number(total.value.replace(/,/g,""))
  };

  const res = await fetch(WEB_APP_URL,{
    method:"POST",
    body: JSON.stringify(payload)
  });

  alert("Saved to Google Sheet âœ…");
  quantity.value = 1;
  price.value = "";
  total.value = "";
}
</script>


</body>
</html>








  
